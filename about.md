この内容をもとに、必要事項をTodoリスト化してください

## 1. 機能概要

1. **書店検索機能**

   * 事前に登録された書店情報を元に検索を行う。
   * ユーザーが郵便番号を入力し、検索ボタンを押すと、該当郵便番号の座標を中心とした半径○km以内の書店一覧を表示する。
   * 検索結果が 0 件の場合は「該当する書店が見つかりませんでした」と表示する。

2. **一覧表示項目**

   * 書店名
   * 住所
   * 電話番号
   * Google Maps リンク（`https://www.google.com/maps/search/?api=1&query=緯度,経度` 形式）

3. **レスポンシブ対応**

   * PC／タブレット／スマホの各画面サイズでレイアウトが崩れないように調整。
   * 入力フォーム・一覧ともに柔軟に折り返し・スクロール可能とする。

4. **アクセシビリティ**

   * キーボード操作でのフォーカス移動、スクリーンリーダー対応を考慮する。
   * 日本語環境を前提とし、多言語対応は現時点で不要。

---

## 2. ユーザー操作フロー

1. ユーザーが郵便番号を入力
2. 「検索」ボタンをクリック／タップ
3. サーチ処理

   * クライアント側で Haversine 方式による距離計算を実行
   * または Vercel Function を呼び出してサーバー側で距離計算
4. 検索結果一覧を画面にレンダリング
5. 結果件数が 0 件の場合、該当メッセージを表示

---

## 3. データ要件

* **書店情報ソース**

  * JSON ファイルに以下の形式で保持

    ```json
    [
      {
        "id": 1,
        "name": "〇〇書店",
        "address": "東京都新宿区西新宿X-X-X",
        "latitude": 35.6895,
        "longitude": 139.6917,
        "phone": "03-XXXX-XXXX"
      },
      …
    ]
    ```

* **距離の定義**

  * デフォルト検索半径：5km
  * 将来的にユーザーが任意に半径を指定できる拡張を見据える

* **データ更新運用**

  * JSON ファイルは GitHub リポジトリで管理
  * 更新時は Pull Request → レビュー → マージ → Vercel CI 自動デプロイ

---

## 4. 技術要件

* **フロントエンド**
  react-router

* **距離計算**

  * クライアント完結：ブラウザ上で Haversine 式による計算

* **デプロイ**

  * Vercel 単体で完結
  * 静的アセット（JSON＋フロント）＋必要に応じて Function

---

## 5. 推奨アーキテクチャ

```mermaid
flowchart LR
  A[郵便番号入力フォーム] --> B[距離計算判定]
  B -->|クライアント| C[Haversine計算(JS)]
  B -->|サーバー| D[Vercel Function(Node.js)]
  subgraph Data
    E[書店情報(JSON)]
  end
  E --> C
  E --> D
  C --> F[一覧レンダリング]
  D --> F
```

* **静的ホスティング**：JSON とフロントエンドは Vercel の静的ホスト
* **Function**：距離計算や大規模データ向けにオンデマンド計算
* **CI/CD**：GitHub → Vercel 自動デプロイ

---

## 6. テスト & 運用

1. **ユニットテスト**

   * 郵便番号→座標変換
   * Haversine 計算ロジック検証
   * JSON パース／入力バリデーション（郵便番号形式チェック）

2. **エンドツーエンドテスト**

   * Cypress 等で主要郵便番号について検索結果確認
   * レスポンシブレイアウトチェック

3. **運用フロー**

   * JSON 更新手順書：更新者・レビュワー・デプロイ手順をドキュメント化
   * エラーログ監視：Vercel ログ機能で関数の失敗をキャッチ
